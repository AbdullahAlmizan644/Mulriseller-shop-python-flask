{% extends "base.html" %}
{% block title %}Shop{%endblock %}
{% block head %}
{{ super() }}
<style type="text/css">

</style>
{% endblock %}


{% block content %}

<!-- breadcrumb start
<section class="breadcrumb breadcrumb_bg">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="breadcrumb_iner">
          <div class="breadcrumb_iner_item">
            <h2>Shop Single</h2>
            <p>Home <span>-</span> Shop Single</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- breadcrumb start-->
<!--================End Home Banner Area =================-->

<!--================Single Product Area =================-->
<div class="product_image_area section_padding">
  <div class="container">
    <div class="row s_product_inner justify-content-between">
      <div class="col-lg-7 col-xl-7">
        <div class="product_slider_img">
          <div id="vertical">
            {% set img = "front/img/" + single_product.4 %}
            <div data-thumb=img/product/single-product/product_1.png>
              <img src={{ url_for("static", filename=img )}}>
            </div>
            <!--<div data-thumb="img/product/single-product/product_1.png">
              <img src={{ url_for("static", filename=img )}}>
            </div>
            <div data-thumb="img/product/single-product/product_1.png">
              <img src={{ url_for("static", filename=img )}}>
            </div>
            <div data-thumb="img/product/single-product/product_1.png">
              <img src={{ url_for("static", filename=img )}}>
            </div>-->
          </div>
        </div>
      </div>
      <div class="col-lg-5 col-xl-4">
        <div class="s_product_text">
          <!--<h5>previous <span>|</span> next</h5>-->
          <input type="hidden" name="" value="{{count}}" id="item">
          <input type="hidden" id="id-{{count}}" value="{{single_product.0}}">
          <input type="hidden" id="productName-{{ count}}" value="{{single_product.1}}">
          <input type="hidden" id="price-{{ count}}" value="{{single_product.4}}">
          <input type="hidden" id="productImage-{{ count}}" value="{{single_product.2}}">

          <h3>{{single_product.1}}</h3>
          <h2>{{single_product.3}}Tk</h2>
          <ul class="list">
            <li>
              <a class="active" href="#" style="text-decoration: none;">
                <span>Category</span> : {{single_product.5}}</a>
            </li>
            <li>
              <span>Availibility</span> : In Stock
            </li>
            <!-- <li>
                <span>Rating</span> : <span style="color: red;">{{a}}</span>
                <input id="kartik" class="rating" data-stars="5" name="product_rating" data-step="0.1" title="" />
              </li> -->
          </ul>
          <p>
            {{single_product.2}}
          </p>

          <div class="card_area d-flex justify-content-between align-items-center">
            <!-- <div class="product_count">
              <span class="inumber-decrement"> <i class="ti-minus"></i></span>
              <input class="input-number" type="text" value="1" min="0" max="10">
              <span class="number-increment"> <i class="ti-plus"></i></span>
              <a href="/checkout/{{ single_product.0 }}" class="btn_2">Add to cart</a>
            </div> -->

            <a class="btn_3 add-cart" id="add-cart">Add to cart</a>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<section class="product_description_area">
  {% with messages = get_flashed_messages() %}
  {% if messages %}
  <ul class=flashes>
    {% for message in messages %}
    <div class="alert alert-danger" role="alert">
      {{ message }}
    </div>
    {% endfor %}
  </ul>
  {% endif %}
  {% endwith %}
  <div class="container">
    <!-- <div class="m-5">

        <form action="/rating/{{single_product.0}}" method="post">
          <input id="kartik" class="rating" data-stars="5" name="product_rating" data-step="0.1" title="" />
          <div class="form-group" style="margin-top:10px">
            <button type="submit" class="btn btn-info">Rate</button>
          </div>
        </form>
      </div> -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item">
        <a class="nav-link" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
          aria-selected="true">Description</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile"
          aria-selected="false">Specification</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" id="review-tab" data-toggle="tab" href="#review" role="tab" aria-controls="review"
          aria-selected="false">Reviews</a>
      </li>
    </ul>
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade" id="home" role="tabpanel" aria-labelledby="home-tab">
        <p>
          Lorem, ipsum dolor sit amet consectetur adipisicing elit. Numquam eaque rerum officia. At, possimus quas
          maiores impedit velit obcaecati error quisquam necessitatibus vitae qui eligendi dignissimos natus ea odit
          excepturi dolor voluptas! Culpa perferendis sunt, necessitatibus doloremque suscipit voluptatibus? Eum,
          numquam voluptatum impedit eligendi pariatur quae nostrum doloremque dolore nesciunt asperiores odit quidem,
          eius laborum quaerat sunt rerum quisquam quia rem vero hic dolor consequuntur aliquam quos repudiandae.
          Possimus illo dolore nostrum. Exercitationem, dolore! Adipisci veritatis debitis nesciunt magnam, sapiente
          eaque iusto quas odit aliquam at inventore ea consequatur vel provident quos tenetur magni non. In, quasi.
          Sequi iure nostrum atque voluptates? Deserunt, consequuntur. Aut repellendus repudiandae sunt modi ducimus
          est
          amet quo atque, nulla similique quia, delectus esse adipisci corrupti ex natus autem et non cum nam nemo!
          Exercitationem voluptas, maxime officia facere illum error officiis doloremque omnis rerum accusamus, ab
          neque
          distinctio recusandae accusantium veritatis quos facilis cum sint dolorum, aperiam fugit similique. Tempore,
          unde excepturi. Deleniti minus quos excepturi praesentium odit ab quas eius ad. Consequuntur voluptatem
          aliquam, veritatis reiciendis necessitatibus, libero asperiores sequi doloremque dolore unde cum. Debitis
          delectus rerum distinctio in dolore aperiam, ipsa accusamus est repellat velit maxime sed doloribus
          voluptates

        </p>
        <p>
          doloremque, aspernatur molestias ducimus. Soluta illo possimus exercitationem commodi rerum expedita fuga
          laboriosam laborum omnis excepturi! Voluptatum sequi illum, fuga delectus sint repudiandae eaque accusamus
          sapiente, iusto repellat consequuntur repellendus, quam officiis eos quis. Est qui officiis quas aspernatur
          consectetur maxime, ea quam facilis delectus quaerat at voluptas architecto dolorum praesentium autem culpa
          mollitia cumque, suscipit odio repellendus ipsa aliquid. Nemo unde maiores autem facere incidunt iusto
          sapiente et quis impedit, velit eligendi temporibus. Non sit, vitae optio sequi incidunt, voluptas
          veritatis,
          unde debitis laborum officiis provident. Deleniti non optio veniam voluptatibus incidunt est consectetur
          abdita magni illo. Odio perspiciatis sed natus quisquam maiores magnam officiis
          inventore incidunt recusandae?
        </p>
      </div>
      <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
        <div class="table-responsive">
          <table class="table">
            <tbody>
              <tr>
                <td>
                  <h5>Width</h5>
                </td>
                <td>
                  <h5>128mm</h5>
                </td>
              </tr>
              <tr>
                <td>
                  <h5>Height</h5>
                </td>
                <td>
                  <h5>508mm</h5>
                </td>
              </tr>
              <tr>
                <td>
                  <h5>Depth</h5>
                </td>
                <td>
                  <h5>85mm</h5>
                </td>
              </tr>
              <tr>
                <td>
                  <h5>Weight</h5>
                </td>
                <td>
                  <h5>52gm</h5>
                </td>
              </tr>
              <tr>
                <td>
                  <h5>Quality checking</h5>
                </td>
                <td>
                  <h5>yes</h5>
                </td>
              </tr>
              <tr>
                <td>
                  <h5>Freshness Duration</h5>
                </td>
                <td>
                  <h5>03days</h5>
                </td>
              </tr>
              <tr>
                <td>
                  <h5>When packeting</h5>
                </td>
                <td>
                  <h5>Without touch of hand</h5>
                </td>
              </tr>
              <tr>
                <td>
                  <h5>Each Box contains</h5>
                </td>
                <td>
                  <h5>60pcs</h5>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">

      </div>
      <div class="tab-pane fade show active" id="review" role="tabpanel" aria-labelledby="review-tab">
        <div class="row">
          <div class="col-lg-6">
            <div class="row total_rate">
            </div>
            {% for comment in comments %}
            <div class="review_list">
              <div class="review_item">
                <div class="media">
                  <div class="d-flex">
                    <img src="img/product/single-product/review-1.png" alt="" />
                  </div>
                  <div class="media-body">
                    <h4>{{ comment.1 }}</h4>
                  </div>
                </div>
                <p>
                  {{ comment.4 }}
                </p>
              </div>
            </div>
            {% endfor %}
          </div>

          <div class="col-lg-6">
            <div class="review_box">
              <h4>Add a Review</h4>

              <form class="row contact_form" action="" method="post" novalidate="novalidate">
                <div class="col-md-12">
                  <div class="form-group">
                    <textarea class="form-control" name="message" rows="1" style="height: 200px;"
                      placeholder="Review"></textarea>
                  </div>
                </div>
                <div class="col-md-12 text-right">
                  <button type="submit" value="submit" class="btn_3">
                    Submit Now
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!--================End Product Description Area =================-->

<!-- product_list part start-->
<section class="product_list best_seller section_padding">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-12">
        <div class="section_tittle text-center">
          <h2>Best Selling product <span></span></h2>
        </div>
      </div>
    </div>
    <div class="row align-items-center justify-content-between">
      <div class="col-lg-12">
        <div class="best_product_slider owl-carousel">
          {% for product in products%}
          {% set img = "front/img/" + product.4 %}
          {% if product.6>200 %}
          <div class="single_product_item">
            <img src={{ url_for ("static", filename=img )}} alt="">
            <div class="single_product_text">
              <h4>{{product.1}}</h4>
              <h3>{{product.3}}Tk</h3>
              <a href="/singleProduct/{{product.0}}" class="genric-btn success">View Details</a>
            </div>
          </div>
          {% endif %}
          {% endfor %}
          <!--<div class="single_product_item">
                      <img src={{ url_for ("static", filename="front/img/product/product_2.png")}} alt="">
                      <div class="single_product_text">
                          <h4>Quartz Belt Watch</h4>
                          <h3>$150.00</h3>
                      </div>
                  </div>
                  <div class="single_product_item">
                      <img src={{ url_for ("static", filename="front/img/product/product_3.png")}} alt="">
                      <div class="single_product_text">
                          <h4>Quartz Belt Watch</h4>
                          <h3>$150.00</h3>
                      </div>
                  </div>
                  <div class="single_product_item">
                      <img src={{ url_for ("static", filename="front/img/product/product_4.png")}} alt="">
                      <div class="single_product_text">
                          <h4>Quartz Belt Watch</h4>
                          <h3>$150.00</h3>
                      </div>
                  </div>
                  <div class="single_product_item">
                      <img src={{ url_for ("static", filename="front/img/product/product_5.png")}} alt="">
                      <div class="single_product_text">
                          <h4>Quartz Belt Watch</h4>
                          <h3>$150.00</h3>
                      </div>
                  </div>-->
        </div>
      </div>
    </div>
  </div>
</section>


<script>

  let data = [];



  function Order(id, name, price, quantity, image) {
    this.id = id;
    this.name = name;
    this.price = price;
    this.quantity = quantity;
    this.image = image;
    this.total = this.price;
  }


  function getValue(index) {
    let idValue = parseInt(document.getElementById("item").value);
    const list = [];
    const id = document.getElementById(`id-${idValue}`).value;
    const productName = document.getElementById(`productName-${idValue}`).value;
    const price = document.getElementById(`price-${idValue}`).value;
    console.log(price);
    const productImage = document.getElementById(`productImage-${idValue}`).value;

    console.log(document.getElementById(`price-${idValue}`).value);


    list.push(id, productName, parseInt(price), productImage);
    return list;

  }



  function save(obj) {

    // console.log("keno tumi run hocco na")
    for (let i = 0; i < data.length; i++) {
      if (data[i].id === obj.id) {
        data[i].quantity = data[i].quantity + 1;
        data[i] = data[i];
        data[i].total = data[i].price * data[i].quantity;
        return;
      }
    };

    data.push(obj);
  };

  function orderProduct(index) {

    // const properties=getValue(index);
    // const obj=new Order(index,properties[1],properties[2],1,properties[3]);
    // obj.totalCost();
    // save(obj);
    // localStorage.setItem('product',JSON.stringify(data));

    const cartData = JSON.parse(localStorage.getItem('product'));
    // let catchCount=parseInt(localStorage.getItem('count'));

    if (cartData) {
      data = cartData;
      const properties = getValue();
      const obj = new Order(index, properties[1], properties[2], 1, properties[3]);
      // obj.totalCost();
      save(obj);
      localStorage.setItem('product', JSON.stringify(data));

    } else {

      const properties = getValue(index);
      const obj = new Order(index, properties[1], properties[2], 1, properties[3]);
      // obj.totalCost();
      save(obj);
      localStorage.setItem('product', JSON.stringify(data));

    }


  }


  function costCalculation() {

  }


  function countOrder() {
    const cartCounter = document.getElementById("cartCounter");
    let catchCount = parseInt(localStorage.getItem('count'));

    if (catchCount) {
      catchCount++;
      localStorage.setItem('count', catchCount);
      cartCounter.textContent = catchCount;

    } else {
      localStorage.setItem('count', 1);
      cartCounter.textContent = 1;
    }


  }

  function nextPreOrder(index) {
    countOrder();
    orderProduct(index);

  }


  function addCart() {
    // console.log("hello2");
    // console.log(document.getElementById("item").value);
    let idValue = parseInt(document.getElementById("item").value);

    let addCart = document.querySelector('.add-cart');
    console.log("hello2");
    addCart.addEventListener('click', () => {
      nextPreOrder(idValue);
    })


    // cart.forEach((item, index) => {
    //   item.addEventListener('click', () => {
    //     let idValue=parseInt(document.getElementById("item").value);
    //     nextPreOrder(idValue);

    //   })
    // })
  }


  function restore() {
    let restoreLocalValue = parseInt(localStorage.getItem('count'));
    const cartCounter = document.getElementById("cartCounter");
    if (restoreLocalValue) {
      cartCounter.textContent = restoreLocalValue;
    }

  }




  function manageOrder() {
    // const cart = document.querySelectorAll("#add-cart");
    console.log("hello");
    restore();
    addCart();

  }


  window.addEventListener("load", () => {
    manageOrder();
  });

</script>

{% endblock %}